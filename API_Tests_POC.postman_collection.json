{"info":{"_postman_id":"e5adc216-91e2-4dd6-b8b4-69ecb528a2c0","name":"Processo QA","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"Login Sucesso","event":[{"listen":"test","script":{"id":"f4247c0e-69cd-4f1d-8850-07dba6690aa3","exec":["let jsonData = pm.response.json();","","pm.environment.set(\"bearerToken\", jsonData.access_token);","","pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Check attributes\", function () {","    pm.expect(jsonData).to.have.property('access_token');","    pm.expect(jsonData).to.have.property('expires_in');","    pm.expect(jsonData).to.have.property('refresh_expires_in');","    pm.expect(jsonData).to.have.property('refresh_token');","    pm.expect(jsonData).to.have.property('token_type');","    pm.expect(jsonData).to.have.property('not-before-policy');","    pm.expect(jsonData).to.have.property('session_state');","    pm.expect(jsonData).to.have.property('scope');","});","","pm.test(\"Check attributes values\", function () {","    pm.expect(jsonData.token_type).to.eql('bearer');","    pm.expect(jsonData.scope).to.eql('profile email');","","});"],"type":"text/javascript"}}],"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","value":"application/x-www-form-urlencoded","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"username","value":"processoqa@zup.com.br","type":"text"},{"key":"password","value":"123mudar","type":"text"},{"key":"grant_type","value":"password","type":"text"},{"key":"client_id","value":"darwin-client","type":"text"}]},"url":{"raw":"https://darwin-keycloak.continuousplatform.com/auth/realms/darwin/protocol/openid-connect/token","protocol":"https","host":["darwin-keycloak","continuousplatform","com"],"path":["auth","realms","darwin","protocol","openid-connect","token"]}},"response":[]},{"name":"Login Falha","event":[{"listen":"test","script":{"id":"f950182d-b2f8-49ea-aa83-b66de2650b2e","exec":["pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});"],"type":"text/javascript"}}],"request":{"method":"POST","header":[{"key":"Content-Type","name":"Content-Type","type":"text","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"username","value":"usuario","type":"text"},{"key":"password","value":"senha","type":"text"},{"key":"grant_type","value":"password","type":"text"},{"key":"client_id","value":"darwin-client","type":"text"}]},"url":{"raw":"https://darwin-keycloak.continuousplatform.com/auth/realms/darwin/protocol/openid-connect/token","protocol":"https","host":["darwin-keycloak","continuousplatform","com"],"path":["auth","realms","darwin","protocol","openid-connect","token"]}},"response":[]},{"name":"Circle Sucesso","event":[{"listen":"test","script":{"id":"7a74269a-89f2-4ef3-8299-724c26c7bb4d","exec":["let jsonData = pm.response.json();","","pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Check attributes\", function () {","    pm.expect(jsonData).to.have.property('id');","    pm.expect(jsonData).to.have.property('name');","    pm.expect(jsonData).to.have.property('author');","    pm.expect(jsonData.author).to.have.property('id');","    pm.expect(jsonData.author).to.have.property('name');","    pm.expect(jsonData.author).to.have.property('email');","    pm.expect(jsonData.author).to.have.property('photoUrl');","    pm.expect(jsonData.author).to.have.property('createdAt');","    pm.expect(jsonData).to.have.property('createdAt');","    pm.expect(jsonData).to.have.property('matcherType');","    pm.expect(jsonData).to.have.property('rules');","    pm.expect(jsonData.rules).to.have.property('type');","    pm.expect(jsonData.rules).to.have.property('logicalOperator');","    pm.expect(jsonData.rules).to.have.property('clauses');","    pm.expect(jsonData.rules.clauses[0]).to.have.property('type');","    pm.expect(jsonData.rules.clauses[0]).to.have.property('content');","    pm.expect(jsonData.rules.clauses[0].content).to.have.property('key');","    pm.expect(jsonData.rules.clauses[0].content).to.have.property('condition');","    pm.expect(jsonData.rules.clauses[0].content).to.have.property('value');","    pm.expect(jsonData).to.have.property('deployment');","    pm.expect(jsonData).to.have.property('importedAt');","    pm.expect(jsonData).to.have.property('importedKvRecords');","});","","pm.test(\"Check attributes values\", function () {","    pm.expect(jsonData.name).to.eql(pm.environment.get(\"circleName\"));","    pm.expect(jsonData.rules.logicalOperator).to.eql(pm.environment.get(\"logicalOperator\"));","    pm.expect(jsonData.rules.clauses[0].content.condition).to.eql(pm.environment.get(\"condition\"));","    pm.expect(jsonData.rules.clauses[0].content.value[0]).to.eql(pm.environment.get(\"username\"));","});"],"type":"text/javascript"}}],"request":{"auth":{"type":"bearer","bearer":[{"key":"token","value":"{{bearerToken}}","type":"string"}]},"method":"POST","header":[{"key":"Authorization","value":"Bearer ","type":"text"},{"key":"Content-Type","name":"Content-Type","value":"application/json","type":"text"}],"body":{"mode":"raw","raw":"{\n\t\"name\": \"{{circleName}}\", \n    \"ruleMatcherType\": \"DARWIN\",\n    \"rules\": {\n        \"type\": \"CLAUSE\",\n        \"clauses\": [\n            {\n                \"type\": \"RULE\",\n                \"content\": {\n                    \"key\": \"username\",\n                    \"value\": [\n                        \"{{username}}\"\n                    ],\n                    \"condition\": \"{{condition}}\"\n                }\n            }\n        ],\n        \"logicalOperator\": \"{{logicalOperator}}\"\n    },\n    \"segmentations\": [],\n    \"authorId\": \"5e397f95-11af-4512-a0d7-c68b840e818b\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"https://darwin-api.continuousplatform.com/moove/circles ","protocol":"https","host":["darwin-api","continuousplatform","com"],"path":["moove","circles "]}},"response":[]},{"name":"Circle Falha","event":[{"listen":"test","script":{"id":"5ef8939e-5801-493c-aa7e-571144e65e0f","exec":["let jsonData = pm.response.json();","","pm.test(\"Status code is 400\", function () {","    pm.response.to.have.status(400);","});","","pm.test(\"Check bad request values\", function () {","    pm.expect(jsonData.code).to.eql(\"PAYLOAD_INVALID\");","    pm.expect(jsonData.message).to.eql(\"payload.invalid\");","});"],"type":"text/javascript"}}],"request":{"auth":{"type":"bearer","bearer":[{"key":"token","value":"{{bearerToken}}","type":"string"}]},"method":"POST","header":[{"key":"Authorization","value":"Bearer ","type":"text"},{"key":"Content-Type","name":"Content-Type","value":"application/json","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"ruleMatcherType\": \"DARWIN\",\n    \"rules\": {\n        \"type\": \"CLAUSE\",\n        \"clauses\": [\n            {\n                \"type\": \"RULE\",\n                \"content\": {\n                    \"key\": \"username\",\n                    \"value\": [\n                        \"rafael\"\n                    ],\n                    \"condition\": \"EQUAL\"\n                }\n            }\n        ],\n        \"logicalOperator\": \"OR\"\n    },\n    \"segmentations\": [],\n    \"authorId\": \"5e397f95-11af-4512-a0d7-c68b840e818b\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"https://darwin-api.continuousplatform.com/moove/circles","protocol":"https","host":["darwin-api","continuousplatform","com"],"path":["moove","circles"]}},"response":[]},{"name":"Build Sucesso","event":[{"listen":"test","script":{"id":"e8bc9d90-1f75-47f9-b7cf-ddfe63bfd691","exec":["let jsonData = pm.response.json();","","pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Check attributes of author\", function () {","    pm.expect(jsonData.content[0].author).to.have.property('id');","    pm.expect(jsonData.content[0].author).to.have.property('name');","    pm.expect(jsonData.content[0].author).to.have.property('email');","    pm.expect(jsonData.content[0].author).to.have.property('photoUrl');","    pm.expect(jsonData.content[0].author).to.have.property('createdAt');","});","","pm.test(\"Check attributes of features\", function () {","    pm.expect(jsonData.content[0].features[0]).to.have.property('id');","    pm.expect(jsonData.content[0].features[0]).to.have.property('name');","    pm.expect(jsonData.content[0].features[0]).to.have.property('branchName');","    pm.expect(jsonData.content[0].features[0]).to.have.property('author');","    pm.expect(jsonData.content[0].features[0]).to.have.property('modules');","    pm.expect(jsonData.content[0].features[0]).to.have.property('createdAt');","    pm.expect(jsonData.content[0].features[0]).to.have.property('branches');","});"],"type":"text/javascript"}}],"request":{"auth":{"type":"bearer","bearer":[{"key":"token","value":"{{bearerToken}}","type":"string"}]},"method":"GET","header":[{"key":"Connection","value":"keep-alive"},{"key":"x-application-id","value":"900c4342-df7e-488b-bf6f-1784ee7c0546"},{"key":"Accept","value":"application/json, text/plain, */*"},{"key":"authorization","value":"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ6ZXViWUV3S1JrU2NXVzZHMXVkTDhlQ0hUbFljQnpxR2tVQmVLT0R3c2NRIn0.eyJqdGkiOiIxNzQ3MjhjNy1iMjdkLTQ0ZjQtODg2Mi1lZGIwODJhNGU5NGQiLCJleHAiOjE1ODAzOTI4MTAsIm5iZiI6MCwiaWF0IjoxNTgwMzg5MjEwLCJpc3MiOiJodHRwczovL2Rhcndpbi1rZXljbG9hay5jb250aW51b3VzcGxhdGZvcm0uY29tL2F1dGgvcmVhbG1zL2RhcndpbiIsImF1ZCI6WyJkYXJ3aW4tY2xpZW50IiwiYWNjb3VudCJdLCJzdWIiOiIwNGQ2YTQxZi03ODkwLTQzMTEtODM3MC1kNzVjZDg4ZTZkYjQiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkYXJ3aW4tY2xpZW50IiwiYXV0aF90aW1lIjowLCJzZXNzaW9uX3N0YXRlIjoiY2NhYjIyM2UtOGMwNC00NzhjLTg2MDQtZmI5YWNiM2FkZWViIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJtb292ZV9yZWFkIiwiY29uZmlnX3dyaXRlIiwiYWRtaW4iLCJjaXJjbGVfcmVhZCIsImNpcmNsZV93cml0ZSIsIm1vZHVsZV9yZWFkIiwiYnVpbGRfcmVhZCIsImRlcGxveV9yZWFkIiwiZGVwbG95X3dyaXRlIiwiYnVpbGRfd3JpdGUiLCJvZmZsaW5lX2FjY2VzcyIsImNvbmZpZ19yZWFkIiwibW9kdWxlX3dyaXRlIiwidW1hX2F1dGhvcml6YXRpb24iLCJtb292ZV93cml0ZSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJuYW1lIjoiUmFmYWVsIFBlcmVpcmEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJyYWZhZWwucGVyZWlyYUB6dXAuY29tLmJyIiwiZ2l2ZW5fbmFtZSI6IlJhZmFlbCIsImZhbWlseV9uYW1lIjoiUGVyZWlyYSIsImVtYWlsIjoicmFmYWVsLnBlcmVpcmFAenVwLmNvbS5iciJ9.ZYIu1za_kbChtLrKjuUAsJWuZjNeWQb68yL530LtGKXfwInEBuULveG4AAHSXidd9YUOSNridRLWmBWlBCeUT3O8J7tE4MFcmS9h6AHLNjs0SOmmwNOphqFKSZGaSlcuNm8sw6-Ry3f8G3tEz3gLQtS96F6KpTqGudz7zPrfKLmyuieMoJEJevEwKZnbASdX6mpRvLP4FR0fqqlohGhzMeS9cfRolaGajHMOH8zioilYi0wnur557Mj6X-J7jNNAAHVbH7jQ2_JWp2LxQ7bEWXKz083Bw8LoQ1-36LtEBpAfTX39y2jQBQ3ZnFtgZM9pw_H49F1b_KvSarYs2vP7pg"},{"key":"User-Agent","value":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36"},{"key":"Origin","value":"https://darwin.continuousplatform.com"},{"key":"Sec-Fetch-Site","value":"same-site"},{"key":"Sec-Fetch-Mode","value":"cors"},{"key":"Referer","value":"https://darwin.continuousplatform.com/circles/a8685f7b-ac6d-498b-8b89-8206c03e9322/edit"},{"key":"Accept-Encoding","value":"gzip, deflate, br"},{"key":"Accept-Language","value":"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7,es;q=0.6"},{"key":"Authorization","value":"Bearer ","type":"text"}],"url":{"raw":"https://darwin-api.continuousplatform.com/moove/builds?tagName=&page=0&status=BUILT","protocol":"https","host":["darwin-api","continuousplatform","com"],"path":["moove","builds"],"query":[{"key":"tagName","value":""},{"key":"page","value":"0"},{"key":"status","value":"BUILT"}]}},"response":[]},{"name":"Build Falha","event":[{"listen":"test","script":{"id":"44bf3391-6333-4f9a-bdf0-dabdd6bd3767","exec":["let jsonData = pm.response.json();","","pm.test(\"Status code is 401\", function () {","    pm.response.to.have.status(401);","});","","pm.test(\"Check unauthorized value\", function () {","    pm.expect(jsonData.error).to.eql(\"Key not authorised\");","});"],"type":"text/javascript"}}],"request":{"auth":{"type":"bearer","bearer":[{"key":"token","value":"{{bearerToken}} + erro","type":"string"}]},"method":"GET","header":[{"key":"Connection","value":"keep-alive"},{"key":"x-application-id","value":"900c4342-df7e-488b-bf6f-1784ee7c0546"},{"key":"Accept","value":"application/json, text/plain, */*"},{"key":"authorization","value":"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ6ZXViWUV3S1JrU2NXVzZHMXVkTDhlQ0hUbFljQnpxR2tVQmVLT0R3c2NRIn0.eyJqdGkiOiIxNzQ3MjhjNy1iMjdkLTQ0ZjQtODg2Mi1lZGIwODJhNGU5NGQiLCJleHAiOjE1ODAzOTI4MTAsIm5iZiI6MCwiaWF0IjoxNTgwMzg5MjEwLCJpc3MiOiJodHRwczovL2Rhcndpbi1rZXljbG9hay5jb250aW51b3VzcGxhdGZvcm0uY29tL2F1dGgvcmVhbG1zL2RhcndpbiIsImF1ZCI6WyJkYXJ3aW4tY2xpZW50IiwiYWNjb3VudCJdLCJzdWIiOiIwNGQ2YTQxZi03ODkwLTQzMTEtODM3MC1kNzVjZDg4ZTZkYjQiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkYXJ3aW4tY2xpZW50IiwiYXV0aF90aW1lIjowLCJzZXNzaW9uX3N0YXRlIjoiY2NhYjIyM2UtOGMwNC00NzhjLTg2MDQtZmI5YWNiM2FkZWViIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJtb292ZV9yZWFkIiwiY29uZmlnX3dyaXRlIiwiYWRtaW4iLCJjaXJjbGVfcmVhZCIsImNpcmNsZV93cml0ZSIsIm1vZHVsZV9yZWFkIiwiYnVpbGRfcmVhZCIsImRlcGxveV9yZWFkIiwiZGVwbG95X3dyaXRlIiwiYnVpbGRfd3JpdGUiLCJvZmZsaW5lX2FjY2VzcyIsImNvbmZpZ19yZWFkIiwibW9kdWxlX3dyaXRlIiwidW1hX2F1dGhvcml6YXRpb24iLCJtb292ZV93cml0ZSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJuYW1lIjoiUmFmYWVsIFBlcmVpcmEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJyYWZhZWwucGVyZWlyYUB6dXAuY29tLmJyIiwiZ2l2ZW5fbmFtZSI6IlJhZmFlbCIsImZhbWlseV9uYW1lIjoiUGVyZWlyYSIsImVtYWlsIjoicmFmYWVsLnBlcmVpcmFAenVwLmNvbS5iciJ9.ZYIu1za_kbChtLrKjuUAsJWuZjNeWQb68yL530LtGKXfwInEBuULveG4AAHSXidd9YUOSNridRLWmBWlBCeUT3O8J7tE4MFcmS9h6AHLNjs0SOmmwNOphqFKSZGaSlcuNm8sw6-Ry3f8G3tEz3gLQtS96F6KpTqGudz7zPrfKLmyuieMoJEJevEwKZnbASdX6mpRvLP4FR0fqqlohGhzMeS9cfRolaGajHMOH8zioilYi0wnur557Mj6X-J7jNNAAHVbH7jQ2_JWp2LxQ7bEWXKz083Bw8LoQ1-36LtEBpAfTX39y2jQBQ3ZnFtgZM9pw_H49F1b_KvSarYs2vP7pg"},{"key":"User-Agent","value":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36"},{"key":"Origin","value":"https://darwin.continuousplatform.com"},{"key":"Sec-Fetch-Site","value":"same-site"},{"key":"Sec-Fetch-Mode","value":"cors"},{"key":"Referer","value":"https://darwin.continuousplatform.com/circles/a8685f7b-ac6d-498b-8b89-8206c03e9322/edit"},{"key":"Accept-Encoding","value":"gzip, deflate, br"},{"key":"Accept-Language","value":"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7,es;q=0.6"},{"key":"Authorization","value":"Bearer ","type":"text"}],"url":{"raw":"https://darwin-api.continuousplatform.com/moove/builds?tagName=&page=0&status=BUILT","protocol":"https","host":["darwin-api","continuousplatform","com"],"path":["moove","builds"],"query":[{"key":"tagName","value":""},{"key":"page","value":"0"},{"key":"status","value":"BUILT"}]}},"response":[]}],"auth":{"type":"bearer"},"protocolProfileBehavior":[]}